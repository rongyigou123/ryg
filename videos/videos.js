/*
   ckin v0.0.1: Custom HTML5 Video Player Skins.
   (c) 2017 
   MIT License
   git+https://github.com/hunzaboy/ckin.git
*/
(function(){var f=function f(j){return new RegExp("(^| )"+j+"( |$)")};var d=function d(l,j,m){for(var k=0;k<l.length;k++){j.call(m,l[k])}};function b(j){this.element=j}b.prototype={add:function a(){d(arguments,function(j){if(!this.contains(j)){this.element.className+=" "+j}},this)},remove:function g(){d(arguments,function(j){this.element.className=this.element.className.replace(f(j),"")},this)},toggle:function i(j){return this.contains(j)?(this.remove(j),false):(this.add(j),true)},contains:function c(j){return f(j).test(this.element.className)},replace:function h(k,j){this.remove(k),this.add(j)}};if(!("classList" in Element.prototype)){Object.defineProperty(Element.prototype,"classList",{get:function e(){return new b(this)}})}if(window.DOMTokenList&&DOMTokenList.prototype.replace==null){DOMTokenList.prototype.replace=b.prototype.replace}})();(function(){if(typeof NodeList.prototype.forEach==="function"){return false}NodeList.prototype.forEach=Array.prototype.forEach})();function browserSniff(){var g=navigator.appVersion,e=navigator.userAgent,a=navigator.appName,b=""+parseFloat(navigator.appVersion),d=parseInt(navigator.appVersion,10),f,h,c;if(navigator.appVersion.indexOf("Windows NT")!==-1&&navigator.appVersion.indexOf("rv:11")!==-1){a="IE";b="11;"}else{if((h=e.indexOf("MSIE"))!==-1){a="IE";b=e.substring(h+5)}else{if((h=e.indexOf("Chrome"))!==-1){a="Chrome";b=e.substring(h+7)}else{if((h=e.indexOf("Safari"))!==-1){a="Safari";b=e.substring(h+7);if((h=e.indexOf("Version"))!==-1){b=e.substring(h+8)}}else{if((h=e.indexOf("Firefox"))!==-1){a="Firefox";b=e.substring(h+8)}else{if((f=e.lastIndexOf(" ")+1)<(h=e.lastIndexOf("/"))){a=e.substring(f,h);b=e.substring(h+1);if(a.toLowerCase()==a.toUpperCase()){a=navigator.appName}}}}}}}if((c=b.indexOf(";"))!==-1){b=b.substring(0,c)}if((c=b.indexOf(" "))!==-1){b=b.substring(0,c)}d=parseInt(""+b,10);if(isNaN(d)){b=""+parseFloat(navigator.appVersion);d=parseInt(navigator.appVersion,10)}return[a,d]}var obj={};obj.browserInfo=browserSniff();obj.browserName=obj.browserInfo[0];obj.browserVersion=obj.browserInfo[1];wrapPlayers();var players=document.querySelectorAll(".ckin__player");var iconPlay='<i class="ckin-play"></i>';var iconPause='<i class="ckin-pause"></i>';var iconVolumeMute='<i class="ckin-volume-mute"></i>';var iconVolumeMedium='<i class="ckin-volume-medium"></i>';var iconVolumeLow='<i class="ckin-volume-low"></i>';var iconExpand='<i class="ckin-expand"></i>';var iconCompress='<i class="ckin-compress"></i>';players.forEach(function(f){var o=f.querySelector("video");var k=attachSkin(o.dataset.ckin);f.classList.add(k);var e=o.dataset.overlay;addOverlay(f,e);var m=showTitle(k,o.dataset.title);if(m){f.insertAdjacentHTML("beforeend",m)}var c=buildControls(k);f.insertAdjacentHTML("beforeend",c);var a=o.dataset.color;addColor(f,a);var g=f.querySelector("."+k+"__controls");var h=f.querySelector(".progress");var i=f.querySelector(".progress__filled");var n=f.querySelectorAll(".toggle");var l=f.querySelectorAll("[data-skip]");var j=f.querySelectorAll("."+k+"__slider");var p=f.querySelector(".volume");var b=f.querySelector(".fullscreen");if(obj.browserName==="IE"&&(obj.browserVersion===8||obj.browserVersion===9)){showControls(o);g.style.display="none"}o.addEventListener("click",function(){togglePlay(this,f)});o.addEventListener("play",function(){updateButton(this,n)});o.addEventListener("pause",function(){updateButton(this,n)});o.addEventListener("timeupdate",function(){handleProgress(this,i)});n.forEach(function(q){return q.addEventListener("click",function(){togglePlay(o,f)})});p.addEventListener("click",function(){toggleVolume(o,p)});var d=false;h.addEventListener("click",function(q){scrub(q,o,h)});h.addEventListener("mousemove",function(q){return d&&scrub(q,o,h)});h.addEventListener("mousedown",function(){return d=true});h.addEventListener("mouseup",function(){return d=false});b.addEventListener("click",function(q){return toggleFullScreen(f,b)});addListenerMulti(f,"webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(q){return onFullScreen(q,f)})});function showControls(a){a.setAttribute("controls","controls")}function togglePlay(c,b){var a=c.paused?"play":"pause";c[a]();c.paused?b.classList.remove("is-playing"):b.classList.add("is-playing")}function updateButton(c,b){var a=c.paused?iconPlay:iconPause;b.forEach(function(d){return d.innerHTML=a})}function skip(){video.currentTime+=parseFloat(this.dataset.skip)}function toggleVolume(c,d){var b=c.volume;var a=iconVolumeMedium;if(b==1){b=0;a=iconVolumeMute}else{if(b==0.5){b=1;a=iconVolumeMedium}else{b=0.5;a=iconVolumeLow}}c.volume=b;d.innerHTML=a}function handleRangeUpdate(){video[this.name]=this.value}function handleProgress(c,b){var a=c.currentTime/c.duration*100;b.style.flexBasis=a+"%"}function scrub(a,d,b){var c=a.offsetX/b.offsetWidth*d.duration;d.currentTime=c}function wrapPlayers(){var a=document.querySelectorAll("video");a.forEach(function(b){var c=document.createElement("div");c.classList.add("ckin__player");b.parentNode.insertBefore(c,b);c.appendChild(b)})}function buildControls(b){var a=[];a.push('<button class="'+b+'__button--big toggle" title="Toggle Play">'+iconPlay+"</button>");a.push('<div class="'+b+'__controls ckin__controls">');a.push('<button class="'+b+'__button toggle" title="Toggle Video">'+iconPlay+"</button>",'<div class="progress">','<div class="progress__filled"></div>',"</div>",'<button class="'+b+'__button volume" title="Volume">'+iconVolumeMedium+"</button>",'<button class="'+b+'__button fullscreen" title="Full Screen">'+iconExpand+"</button>");a.push("</div>");return a.join("")}function attachSkin(a){if(typeof a!="undefined"&&a!=""){return a}else{return"default"}}function showTitle(a,b){if(typeof b!="undefined"&&b!=""){return'<div class="'+a+'__title">'+b+"</div>"}else{return false}}function addOverlay(b,a){if(a==1){b.classList.add("ckin__overlay")}else{if(a==2){b.classList.add("ckin__overlay--2")}else{return}}}function addColor(c,b){if(typeof b!="undefined"&&b!=""){var a=c.querySelectorAll("button");var d=c.querySelector(".progress__filled");d.style.background=b;a.forEach(function(e){return e.style.color=b})}}function toggleFullScreen(b,a){if(!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement&&!document.msFullscreenElement){b.classList.add("ckin__fullscreen");if(b.requestFullscreen){b.requestFullscreen()}else{if(b.mozRequestFullScreen){b.mozRequestFullScreen()}else{if(b.webkitRequestFullscreen){b.webkitRequestFullscreen()}else{if(b.msRequestFullscreen){b.msRequestFullscreen()}}}}isFullscreen=true;a.innerHTML=iconCompress}else{b.classList.remove("ckin__fullscreen");if(document.cancelFullScreen){document.cancelFullScreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}else{if(document.msExitFullscreen){document.msExitFullscreen()}}}}isFullscreen=false;a.innerHTML=iconExpand}}function onFullScreen(a,c){var b=document.webkitFullscreenElement!==null;if(!b){c.classList.remove("ckin__fullscreen");c.querySelector(".fullscreen").innerHTML=iconExpand}else{}}function addListenerMulti(a,b,f){var c=b.split(" ");for(var d=0,e=c.length;d<e;d++){a.addEventListener(c[d],f,false)}};